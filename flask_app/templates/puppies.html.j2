{% extends "base.html.j2" %}
{% from 'includes/paging_macro.html.j2' import render_paging %}
{% from 'includes/breeds_macro.html.j2' import render_breeds %}
{% from 'includes/states_macro.html.j2' import render_states %}
{% from 'includes/dog_size_macro.html.j2' import render_dog_size %}
{% from 'includes/resetfilter_macro.html.j2' import reset_filter with context %}
{% set title %}Puppies @ {{ config.STORE_NAME }}{% endset %}
{% set page = 'puppies' %}
{% block content %}

<section class="masthead page-section bg-white mb-0" id="{{ page }}">
    <div class="container">
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Get Puppies</h2>
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-paw"></i></div>
            <div class="divider-custom-line"></div>
        </div>

        <!-- filters and prev/next -->
        <div class="row">
          <div class="col-12 col-lg-3 mb-2 mb-lg-4 d-flex justify-content-start align-items-center">
            <select
              class="form-select w-auto flex-grow-1"
              name="location"
              data-js="param-change"
            >
              <option value="">Select State</option>
              {{ render_states(params.location) }}
            </select>
            {% if params.location %}
              {{ reset_filter('location')}}
            {% endif %}
          </div>
          <div class="col-12 col-lg-3 mb-2 mb-lg-4 d-flex justify-content-start align-items-center">
            <select
              class="form-select"
              name="breed"
              data-js="param-change"
            >
              <option value="">Select Breed</option>
              {{ render_breeds(params.breed) }}
            </select>
            {% if params.breed %}
              {{ reset_filter('breed')}}
            {% endif %}
          </div>
          <div class="col-12 col-lg-3 mb-2 mb-lg-4 d-flex justify-content-start align-items-center">
            <select
              class="form-select w-auto flex-grow-1"
              name="size"
              data-js="param-change"
            >
              <option value="">Select Size</option>
              {{ render_dog_size(params.size) }}
            </select>
            {% if params.size %}
              {{ reset_filter('size')}}
            {% endif %}
          </div>
          <div class="col-12 col-lg-3 mb-2 mb-lg-4 d-flex align-items-center justify-content-between justify-content-lg-end">
            {{ render_paging(prev_url, next_url) }}
          </div>
        </div>
        <!-- /filters and prev/next -->

        <!-- results -->
        <div class="row">
          {% if puppies.animals | length == 0 %}
            <h2>No puppies found! <i class="fas fa-sad-tear fw-normal"></i></h2>
            <p>
              <a href="{{ url_for(request.endpoint) }}">Remove all filters</a> to see more puppies.
            </p>
          {% endif %}

          {% for puppy in puppies.animals %}

            {% set thumb = "/assets/images/puppy.jpg" %}
            {% if puppy.photos|length > 1 %}
              {% set thumb = puppy.photos[0].medium %}
            {% endif %}

            <div class="col-12 col-md-6 col-lg-4 col-xl-3 text-center pb-5">
              <div class="card-box h-100 position-relative">
                <div class="card-thumb-container">
                  <div class="card-thumbnail">
                    <img src="{{ thumb }}" class="img-fluid" alt="{{ puppy.name }}" />
                  </div>
                  <h3>
                    <a href="#" class="mt-4 text-danger">
                      {{ puppy.name }} -
                      {{puppy.contact.address.city}},
                      {{puppy.contact.address.state}}
                    </a>
                  </h3>
                </div>
                <a
                  href="/puppy/{{puppy.id}}"
                  class="btn btn-sm btn-primary read-more-btn"
                  role="button"
                >Read More <i class="fas fa-arrow-right"></i>
                </a>
                <a
                  href="#"
                  class="favorite text-danger"
                  data-favorite="{{puppy.id}}"
                  title="Favorite this puppy!"
                ><i class="fas fa-heart fa-2x"></i>
                </a>
              </div>
            </div>

          {% endfor %}
        </div>
        <!-- /results -->

        <!-- lower pagination-->
        <div class="row">
          <div class="col-12 col-lg-9">&nbsp;</div>
          <div class="col-12 col-lg-3 d-flex align-items-center justify-content-between justify-content-lg-end">
            {{ render_paging(prev_url, next_url) }}
          </div>
        </div>
    </div>
</section>

{% endblock %}
